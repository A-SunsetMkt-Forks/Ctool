import{u as tt,i as et}from"./action-b0774d39.js";import{S as C,d as nt,y as rt,I as L,D as F,z as S,G as H,k as lt,v as s,w as f,j as o,c as R,m as W,V as T,F as ot,r as g,f as M,n as it,l as ut,s as D,X as st}from"./tool-86fca7a1.js";import{I as $}from"./Item-94dfe5b8.js";import"./modulepreload-polyfill-3cfb730f.js";const B=function(n){_(n),n=n.toLowerCase();const r=n.split(/\:\:/g);if(r.length>2)throw new Error("Invalid address: "+n);let e=[];if(r.length===1){if(e=n.split(/\:/g),e.length!==8)throw new Error("Invalid address: "+n)}else if(r.length===2){const t=r[0],l=r[1],i=t.split(/\:/g),p=l.split(/\:/g);for(let c in i)e[c]=i[c];for(let c=p.length;c>0;--c)e[7-(p.length-c)]=p[c-1]}for(let t=0;t<8;++t)e[t]===void 0&&(e[t]="0000"),e[t]=x(e[t],"0",4);return e.join(":")},y=function(n){_(n),n=B(n),n=n.replace(/0000/g,"g"),n=n.replace(/\:000/g,":"),n=n.replace(/\:00/g,":"),n=n.replace(/\:0/g,":"),n=n.replace(/g/g,"0");const r=n.split(/\:/g);let e=!1,t=-1,l=0,i=-1,p=0;for(let c=0;c<8;++c){const b=r[c];let m=b==="0";m&&!e&&(i=c),!m&&e&&(p=c-i),p>1&&p>l&&(t=i,l=p),e=b==="0"}return e&&(p=8-i),p>1&&p>l&&(t=i,l=p),t>=0&&l>1&&r.splice(t,l,"g"),n=r.join(":"),n=n.replace(/\:g\:/g,"::"),n=n.replace(/\:g/g,"::"),n=n.replace(/g\:/g,"::"),n=n.replace(/g/g,"::"),n},_=function(n){const r=[],e=n.split("::");if(e.length>2)throw new Error("Invalid address: "+n);if(e.length===2){if(e[0].startsWith(":")||e[0].endsWith(":")||e[1].startsWith(":")||e[1].endsWith(":"))throw new Error("Invalid address: "+n);if(r.push(...e[0].split(":").filter(t=>t)),r.push(...e[1].split(":").filter(t=>t)),r.length>7)throw new Error("Invalid address: "+n)}else if(e.length===1&&(r.push(...e[0].split(":").filter(t=>t)),r.length!==8))throw new Error("Invalid address: "+n);for(const t of r){const l=t.match(/^[a-f0-9]{1,4}$/i);if((l==null?void 0:l[0])!==t)throw new Error("Invalid address: "+n)}},x=function(n,r,e){const t=r.repeat(e);return n.length<t.length&&(n=t.substring(0,t.length-n.length)+n),n},at=function(n){return parseInt(n,16).toString(2)},ct=function(n){return parseInt(n,2).toString(16)},N=function(n){const e=B(n).split(":");let t="";for(const l of e)t+=x(at(l),"0",16);return t},v=function(n){const r=[];for(let e=0;e<8;++e){const t=n.substr(e*16,16),l=x(ct(t),"0",4);r.push(l)}return r.join(":")},pt=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],c=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let h=0;h<m&&!(t&&h>=t);++h){const I=x(h.toString(2),"0",e-r),A=c+I+b,w=v(A);l?i.push(y(w)):i.push(w)}return i},G=function(n,r,e,t){if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),p="0".repeat(128-e),c=i+"0".repeat(e-r)+p,b=i+"1".repeat(e-r)+p;return t?{start:y(v(c)),end:y(v(b)),size:Math.pow(2,e-r)}:{start:v(c),end:v(b),size:Math.pow(2,e-r)}},dt=function(n,r,e,t){if(typeof BigInt>"u")return G(n,r,e,t);if(_(n),r*=1,e*=1,e=e||128,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=N(n).substr(0,r),p="0".repeat(128-e),c=i+"0".repeat(e-r)+p,b=i+"1".repeat(e-r)+p;return t?{start:y(v(c)),end:y(v(b)),size:BigInt(2**(e-r)).toString()}:{start:v(c),end:v(b),size:BigInt(2**(e-r)).toString()}},ft=function(n,r,e,t,l){if(_(n),r*=1,e*=1,t*=1,e=e||128,t=t||1,r<0||e<0||r>128||e>128||r>e)throw new Error("Invalid masks.");const i=[],c=N(n).substr(0,r),b="0".repeat(128-e),m=Math.pow(2,e-r);for(let h=0;h<m&&h<t;++h){let I="";for(let u=0;u<e-r;++u)I+=Math.floor(Math.random()*2);const A=c+I+b,w=v(A);l?i.push(y(w)):i.push(w)}return i},bt=function(n,r){if(_(n),r*=1,r<0||r>128||Math.floor(r/4)!=r/4)throw new Error("Invalid masks.");return B(n).replace(/:/g,"").split("").reverse().slice(0,(128-r)/4).join(".")},z={normalize:B,abbreviate:y,validate:_,divideSubnet:pt,range:G,rangeBigInt:dt,randomSubnet:ft,ptr:bt},V={normalize:n=>{try{return n!==""?z.normalize(n):""}catch(r){return $error(r)}},abbreviate:n=>{try{return n!==""?z.abbreviate(n):""}catch(r){return $error(r)}},validate:n=>(z.validate(n),!0),subnet:(n,r=32,e=64,t=8,l=!1,i=!1)=>{if(n==="")return C.empty();try{return C.formObject(i?z.randomSubnet(n,r,e,t,l):z.divideSubnet(n,r,e,t,l))}catch(p){return C.fromError($error(p))}},range:(n,r=32,e=64,t=!1)=>{if(n==="")return{start:"",end:"",size:0n};try{return z.rangeBigInt(n,r,e,t)}catch(l){return{start:$error(l),end:$error(l),size:0n}}},ptr:(n,r=32)=>{if(n==="")return"";try{return z.ptr(n,r)}catch(e){return $error(e)}}},gt={style:{display:"grid","grid-template-columns":"1fr 1fr"}},mt={style:{display:"grid","grid-template-columns":"1fr 1fr 1fr"}},zt=nt({__name:"Ipv6",async setup(n){let r,e;const t=tt(([r,e]=rt(()=>et({input:"2404:68::",mask0:32,mask1:64,limit:100,abbr:!1,random:!1,maskPtr:32,subnetOption:st("text")},{paste:u=>{try{V.validate(u)}catch{return!1}return!0}})),r=await r,e(),r));let l=L(""),i=L(!1);F(()=>({input:t.current.input.trim()}),()=>{l.value="";try{if(t.current.input.trim()==="")throw new Error("Input Empty");V.validate(t.current.input)}catch(u){l.value=$error(u)}}),F(()=>({current:t.current}),()=>{t.current.input.trim()!==""&&t.save()},{deep:!0,immediate:!0});const p=S(()=>V.normalize(t.current.input.trim())),c=S(()=>V.abbreviate(t.current.input.trim())),b=S(()=>V.subnet(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.limit,t.current.abbr,t.current.random)),m=S(()=>V.range(t.current.input.trim(),t.current.mask0,t.current.mask1,t.current.abbr)),h=S(()=>V.ptr(t.current.input.trim(),t.current.maskPtr)),I=H.range(0,128).map(u=>({value:u,label:`/${u}`})),A=H.range(0,129,4).map(u=>({value:u,label:`/${u}`})),w=S(()=>{const u=H.range(t.current.mask0+1,129);return u.includes(t.current.mask1)||u.push(t.current.mask1),u.map(a=>({value:a,label:`/${a}`}))});return(u,a)=>{const X=g("Input"),q=g("HelpTip"),E=g("Align"),P=g("Card"),U=g("Select"),j=g("Bool"),J=g("Button"),K=g("Exception"),O=g("HeightResize"),Q=g("SerializeOutput"),Y=g("InputNumber"),Z=g("ExtendPage");return M(),lt(ot,null,[s(E,{horizontal:"center",class:"ctool-page-option",bottom:"default"},{default:f(()=>[s(X,{size:"large",width:400,modelValue:o(t).current.input,"onUpdate:modelValue":a[0]||(a[0]=d=>o(t).current.input=d),label:u.$t("ipcalc_ip")},null,8,["modelValue","label"]),s(q,{link:"https://www.npmjs.com/package/ip6"})]),_:1}),o(l)===""?(M(),R(E,{key:0,direction:"vertical"},{default:f(()=>[s(P,{title:u.$t("ipcalc_ip_info"),padding:"0"},{extra:f(()=>[it(ut(o(t).current.input),1)]),default:f(()=>[D("div",gt,[s($,{title:u.$t("ipcalc_ip_info_full"),value:o(p)},null,8,["title","value"]),s($,{title:u.$t("ipcalc_ip_info_short"),value:o(c)},null,8,["title","value"])])]),_:1},8,["title"]),s(P,{title:u.$t("ipcalc_network_info"),padding:"0"},{extra:f(()=>[s(E,null,{default:f(()=>[s(U,{size:"small",options:o(I),modelValue:o(t).current.mask0,"onUpdate:modelValue":a[1]||(a[1]=d=>o(t).current.mask0=d)},null,8,["options","modelValue"]),s(U,{size:"small",options:o(w),modelValue:o(t).current.mask1,"onUpdate:modelValue":a[2]||(a[2]=d=>o(t).current.mask1=d)},null,8,["options","modelValue"]),s(j,{type:"primary",size:"small",modelValue:o(t).current.abbr,"onUpdate:modelValue":a[3]||(a[3]=d=>o(t).current.abbr=d),label:u.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),s(J,{type:"primary",size:"small",text:u.$t("ipcalc_subnet"),onClick:a[4]||(a[4]=d=>T(i)?i.value=!0:i=!0)},null,8,["text"])]),_:1})]),default:f(()=>[D("div",mt,[s($,{title:u.$t("ipcalc_network_info_size"),value:`${o(m).size}`},null,8,["title","value"]),s($,{title:u.$t("ipcalc_network_info_first"),value:o(m).start},null,8,["title","value"]),s($,{title:u.$t("ipcalc_network_info_last"),value:o(m).end},null,8,["title","value"])])]),_:1},8,["title"]),s(P,{title:u.$t("ipcalc_ip_info_ptr")},{extra:f(()=>[s(U,{size:"small",options:o(A),modelValue:o(t).current.maskPtr,"onUpdate:modelValue":a[5]||(a[5]=d=>o(t).current.maskPtr=d)},null,8,["options","modelValue"])]),default:f(()=>[s($,{value:o(h)},null,8,["value"])]),_:1},8,["title"])]),_:1})):W("",!0),o(l)!==""?(M(),R(O,{key:1,append:[".ctool-page-option"]},{default:f(()=>[s(K,{content:o(l)},null,8,["content"])]),_:1},8,["append"])):W("",!0),s(Z,{modelValue:o(i),"onUpdate:modelValue":a[10]||(a[10]=d=>T(i)?i.value=d:i=d)},{default:f(()=>[s(P,{title:`${o(t).current.input} ${u.$t("ipcalc_subnet")}`,padding:"0"},{extra:f(()=>[s(E,null,{default:f(()=>[s(Y,{size:"small",width:120,modelValue:o(t).current.limit,"onUpdate:modelValue":a[7]||(a[7]=d=>o(t).current.limit=d),label:u.$t("ipcalc_limit")},null,8,["modelValue","label"]),s(j,{type:"primary",size:"small",modelValue:o(t).current.abbr,"onUpdate:modelValue":a[8]||(a[8]=d=>o(t).current.abbr=d),label:u.$t("ipcalc_short"),border:""},null,8,["modelValue","label"]),s(j,{type:"primary",size:"small",modelValue:o(t).current.random,"onUpdate:modelValue":a[9]||(a[9]=d=>o(t).current.random=d),label:u.$t("ipcalc_random"),border:""},null,8,["modelValue","label"])]),_:1})]),default:f(()=>[s(O,{reduce:35},{default:f(({height:d})=>[s(Q,{disabledBorder:"",modelValue:o(t).current.subnetOption,"onUpdate:modelValue":a[6]||(a[6]=k=>o(t).current.subnetOption=k),allow:["json","xml","yaml","toml","php_array","properties","text"],content:o(b),height:d},null,8,["modelValue","content","height"])]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{zt as default};
