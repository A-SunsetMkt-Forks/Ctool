import{bH as a,bQ as o,b_ as u}from"./history-22e01718.js";import{_ as m}from"./index-bdcf4a0c.js";import{l as p}from"./index-25d7a505.js";const x=()=>{const e=a(),t=m.create();return t.interceptors.request.use(r=>{if(o.runtime.webSecurity()&&r.url&&u.is(r.url)){if(!e.items.proxy_enable||!e.items.proxy_url)throw new Error($t("main_network_request_proxy_prompt"));r.headers=r.headers?r.headers:{};const s=r.url.includes("?")?"&":"?";r.headers["Ctool-Proxy-Url"]=`${r.url}${r.params?`${s}${p.stringify(r.params)}`:""}`,r.params=void 0,r.url=e.items.proxy_url}return r}),t};export{x as a};
