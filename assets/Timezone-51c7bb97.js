import{u as O,i as P}from"./action-b0774d39.js";import{d as q,ae as u,z as i,y as G,I as Z,D as J,k as $,v as l,w as d,j as r,V as M,F as h,r as z,B as K,f as s,q as H,c as C,m as Q,G as W,A as X}from"./tool-86fca7a1.js";import{u as ee,t as te,z as ne,e as re}from"./en_US-f29fb547.js";import"./modulepreload-polyfill-3cfb730f.js";const oe={key:1},ce=q({__name:"Timezone",async setup(ue){let f,w;u.extend(ee),u.extend(te);const _="large",B=["Asia/Shanghai","Europe/London","Asia/Tokyo","America/Chicago","Europe/Berlin","Africa/Cairo","Asia/Calcutta"],Y=i(()=>{const t=Intl.supportedValuesOf("timeZone");return Object.entries($t("main_locale")==="zh_CN"?ne:re).filter(([n])=>t.includes(n)).map(([n,p])=>({value:n,label:`${p}`}))}),D=t=>new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+$/).test(t.trim())||new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+\.\d+$/).test(t.trim()),e=O(([f,w]=G(()=>P({type:"",input:"",timezone:[...new Set([u.tz.guess(),...B])].slice(0,7)},{paste:!1})),f=await f,w(),f));let a=Z(!1);const c=t=>{if(!e.current.type||e.current.input.trim()==="")return"";if(e.current.type===t)return e.current.input;try{if(!y.value)throw new Error($t("time_error_format"));return k(e.current.input,e.current.type,t)}catch(n){return $error(n)}},m=(t,n)=>{e.current.input=n,e.current.type=t};J(()=>e.current,t=>{!D(t.input)||t.type===""||e.save()},{immediate:!0,deep:!0});const y=i(()=>D(e.current.input.trim())),k=(t,n,p)=>t.includes(".")?u.tz(u.tz(t,n),p).format("YYYY-MM-DD HH:mm:ss.SSS"):u.tz(u.tz(t,n),p).format("YYYY-MM-DD HH:mm:ss"),S=()=>{e.current.type=e.current.timezone[0],e.current.input=u.tz(u(),e.current.type).format("YYYY-MM-DD HH:mm:ss")},b=i({get:()=>c(e.current.timezone[0]),set:t=>m(e.current.timezone[0],t)}),I=i({get:()=>c(e.current.timezone[1]),set:t=>m(e.current.timezone[1],t)}),T=i({get:()=>c(e.current.timezone[2]),set:t=>m(e.current.timezone[2],t)}),U=i({get:()=>c(e.current.timezone[3]),set:t=>m(e.current.timezone[3],t)}),L=i({get:()=>c(e.current.timezone[4]),set:t=>m(e.current.timezone[4],t)}),j=i({get:()=>c(e.current.timezone[5]),set:t=>m(e.current.timezone[5],t)}),N=i({get:()=>c(e.current.timezone[6]),set:t=>m(e.current.timezone[6],t)}),x={output0:b,output1:I,output2:T,output3:U,output4:L,output5:j,output6:N};return(t,n)=>{const p=z("Input"),A=z("Select"),v=z("Button"),V=z("Align"),E=z("Display"),R=z("ExtendPage"),F=K("row");return s(),$(h,null,[l(V,{direction:"vertical"},{default:d(()=>[(s(!0),$(h,null,H(r(W.range)(0,7),o=>(s(),C(E,{position:"right-center"},{extra:d(()=>[l(V,null,{default:d(()=>[l(A,{modelValue:r(e).current.timezone[o],"onUpdate:modelValue":g=>r(e).current.timezone[o]=g,options:r(Y),size:"small",disabled:r(y)&&r(e).current.timezone[o]===r(e).current.type},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),r(y)?(s(),C(v,{key:0,text:t.$t("main_ui_copy"),onClick:g=>t.$copy(x[`output${o}`].value),size:"small",type:"primary"},null,8,["text","onClick"])):Q("",!0)]),_:2},1024)]),default:d(()=>[l(p,{modelValue:x[`output${o}`].value,"onUpdate:modelValue":g=>x[`output${o}`].value=g,placeholder:t.$t("time_timezone_input_placeholder"),size:_},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),r(y)?X((s(),$("div",oe,[l(v,{size:_,onClick:n[0]||(n[0]=o=>M(a)?a.value=!0:a=!0),text:t.$t("main_ui_more")},null,8,["text"]),l(v,{size:_,onClick:n[1]||(n[1]=o=>r(e).current.input=""),text:t.$t("main_ui_clear")},null,8,["text"])])),[[F,"1-100px"]]):(s(),C(v,{key:0,size:_,text:t.$t("time_current_time"),onClick:S},null,8,["text"]))]),_:1}),l(R,{modelValue:r(a),"onUpdate:modelValue":n[2]||(n[2]=o=>M(a)?a.value=o:a=o)},{default:d(()=>[l(V,{direction:"vertical"},{default:d(()=>[(s(!0),$(h,null,H(r(Y),o=>(s(),C(E,{position:"right-center",text:o.label,type:o.value===r(e).current.type?"danger":"general",onClick:()=>t.$copy(k(r(e).current.input,r(e).current.type,o.value))},{default:d(()=>[l(p,{"model-value":k(r(e).current.input,r(e).current.type,o.value),size:_},null,8,["model-value"])]),_:2},1032,["text","type","onClick"]))),256))]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ce as default};
