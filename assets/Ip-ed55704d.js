import{u as b,i as w}from"./action-716087f2.js";import{b as A,S as _}from"./index-e681e371.js";import{_ as q}from"./index-bdcf4a0c.js";import{D,bj as E,aB as N,l as g,p as y,y as r,bk as l,aG as a,at as u,q as O,b0 as n,x as h,aU as v,o as x,n as I,bv as L}from"./history-00b3515f.js";import"./index-25d7a505.js";import"./callBound-7203e6b7.js";import"./_commonjsHelpers-87174ba5.js";import"./shim-03580cdb.js";import"./empty-9f795c74.js";import"./index-395898e3.js";const U={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},R={style:{display:"grid","grid-template-columns":"1fr 80px","column-gap":"5px"}},G={key:0,style:{"text-align":"center"}},Z=D({__name:"Ip",async setup(T){let s,c;const k=/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))/ig,e=b(([s,c]=E(()=>w({input:"",option:A("json"),result:""},{paste:t=>k.test(t)||t==="localhost"})),s=await s,c(),s));let d=N(!1);const p=g(()=>e.current.result===""?_.empty():_.formObject(e.current.result)),m=g(()=>!p.value.isEmpty()||p.value.isError()),V=()=>{e.current.input="localhost",f()},f=()=>{d.value=!0,q({url:"https://get.geojs.io/v1/ip/geo.json",params:e.current.input!=="localhost"?{ip:e.current.input}:{}}).then(({data:t})=>{e.current.result=L.isArray(t)&&t.length<2?t[0]:t,e.save()}).catch(t=>{e.current.result={error:$error(t,!1)},e.save()}).then(()=>{d.value=!1})};return(t,o)=>{const j=a("Input"),z=a("Display"),S=a("Button"),$=a("Link"),B=a("SerializeOutput"),C=a("Align");return u(),y("div",U,[r(C,{width:600,direction:"vertical"},{default:l(()=>[O("div",R,[r(z,{type:"general",text:n(e).current.input===""?t.$t("ip_local"):"",onClick:V,position:"right-center"},{default:l(()=>[r(j,{modelValue:n(e).current.input,"onUpdate:modelValue":o[0]||(o[0]=i=>n(e).current.input=i),size:"large",placeholder:t.$t("ip_input")},null,8,["modelValue","placeholder"])]),_:1},8,["text"]),r(S,{type:"primary",loading:d.value,size:"large",onClick:f},{default:l(()=>[h(v(t.$t("ip_query")),1)]),_:1},8,["loading"])]),m.value?x("",!0):(u(),y("div",G,[r($,{href:"https://geojs.io/"},{default:l(()=>[h(v(t.$t("ip_info_source"))+": https://geojs.io/",1)]),_:1})])),m.value?(u(),I(B,{key:1,allow:["json","xml","yaml","toml","php_array","properties","http_query_string"],content:p.value,height:300,modelValue:n(e).current.option,"onUpdate:modelValue":o[1]||(o[1]=i=>n(e).current.option=i),onSuccess:o[2]||(o[2]=i=>n(e).save())},null,8,["content","modelValue"])):x("",!0)]),_:1})])}}});export{Z as default};
