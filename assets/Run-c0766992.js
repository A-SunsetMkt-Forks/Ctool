import{u as I,i as A}from"./action-9b065abe.js";import{bO as M,D as K,bj as P,aB as C,l as Q,bf as H,am as q,p as x,y as u,bk as r,F,aG as s,aH as Z,at as V,b0 as o,q as _,aU as N,x as z,n as W,o as X,bm as B}from"./history-1682971a.js";import{a as O}from"./proxy-c01f58a5.js";import{a as Y}from"./index-bdcf4a0c.js";import{g as ee}from"./code-df5c3784.js";import"./shim-03580cdb.js";import"./_commonjsHelpers-87174ba5.js";import"./index-25d7a505.js";import"./callBound-7203e6b7.js";import"./index-1a29e17b.js";const ae=""+new URL("run_api_config-96d4f360.png",import.meta.url).href,$=[{code:"java",version:[{name:"JDK 1.8.0_66",value:"0"},{name:"JDK 9.0.1",value:"1"},{name:"JDK 10.0.1",value:"2"},{name:"JDK 11.0.4",value:"3"},{name:"JDK 17.0.1",value:"4"}]},{code:"c",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"c99",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"cpp14",version:[{name:"g++ 14 GCC 5.3.0",value:"0"},{name:"g++ 14 GCC 7.2.0",value:"1"},{name:"g++ 14 GCC 8.1.0",value:"2"},{name:"g++ 14 GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp17",version:[{name:"g++ 17 GCC 9.1.0",value:"0"},{name:"GCC 11.1.0",value:"1"}]},{code:"php",version:[{name:"5.6.16",value:"0"},{name:"7.1.11",value:"1"},{name:"7.2.5",value:"2"},{name:"7.3.10",value:"3"},{name:"8.0.13",value:"4"}]},{code:"perl",version:[{name:"5.22.0",value:"0"},{name:"5.26.1",value:"1"},{name:"5.26.2",value:"2"},{name:"5.30.0",value:"3"},{name:"5.34.0",value:"4"}]},{code:"python2",version:[{name:"2.7.11",value:"0"},{name:"2.7.15",value:"1"},{name:"2.7.16",value:"2"},{name:"2.7.18",value:"3"}]},{code:"python3",version:[{name:"3.5.1",value:"0"},{name:"3.6.3",value:"1"},{name:"3.6.5",value:"2"},{name:"3.7.4",value:"3"},{name:"3.9.9",value:"4"}]},{code:"ruby",version:[{name:"2.2.4",value:"0"},{name:"2.4.2p198",value:"1"},{name:"2.5.1p57",value:"2"},{name:"2.6.5",value:"3"},{name:"3.0.2",value:"4"}]},{code:"go",version:[{name:"1.5.2",value:"0"},{name:"1.9.2",value:"1"},{name:"1.10.2",value:"2"},{name:"1.13.1",value:"3"},{name:"1.17.3",value:"4"}]},{code:"scala",version:[{name:"2.12.0",value:"0"},{name:"2.12.4",value:"1"},{name:"2.12.5",value:"2"},{name:"2.13.0",value:"3"},{name:"2.13.6",value:"4"}]},{code:"bash",version:[{name:"4.3.42",value:"0"},{name:"4.4.12",value:"1"},{name:"4.4.19",value:"2"},{name:"5.0.011",value:"3"},{name:"5.1.12",value:"4"}]},{code:"sql",version:[{name:"SQLite 3.9.2",value:"0"},{name:"SQLite 3.21.0",value:"1"},{name:"SQLite 3.23.1",value:"2"},{name:"SQLite 3.29.0",value:"3"},{name:"3.37.0",value:"4"}]},{code:"pascal",version:[{name:"fpc 3.0.0",value:"0"},{name:"fpc-3.0.2",value:"1"},{name:"fpc-3.0.4",value:"2"},{name:"fpc-3.2.2",value:"3"}]},{code:"csharp",version:[{name:"mono 4.2.2",value:"0"},{name:"mono 5.0.0",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono-6.12.0",value:"4"}]},{code:"vbn",version:[{name:"mono 4.0.1",value:"0"},{name:"mono 4.6",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono 6.12.0",value:"4"}]},{code:"haskell",version:[{name:"ghc 7.10.3",value:"0"},{name:"ghc 8.2.1",value:"1"},{name:"ghc 8.2.2",value:"2"},{name:"ghc 8.6.5",value:"3"},{name:"9.0.1",value:"4"}]},{code:"objc",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"swift",version:[{name:"2.2",value:"0"},{name:"3.1.1",value:"1"},{name:"4.1",value:"2"},{name:"5.1",value:"3"},{name:"5.5",value:"4"}]},{code:"groovy",version:[{name:"2.4.6 JVM: 1.7.0_99",value:"0"},{name:"2.4.12 JVM: 9.0.1",value:"1"},{name:"2.4.15 JVM: 10.0.1",value:"2"},{name:"2.5.8 JVM: 11.0.4",value:"3"},{name:"3.0.9 JVM: 17.0.1",value:"4"}]},{code:"fortran",version:[{name:"GNU 5.3.0",value:"0"},{name:"GNU 7.2.0",value:"1"},{name:"GNU 8.1.0",value:"2"},{name:"GNU 9.1.0",value:"3"},{name:"GNU 11.1.0",value:"4"}]},{code:"brainfuck",version:[{name:"bfc-0.1",value:"0"}]},{code:"lua",version:[{name:"5.3.2",value:"0"},{name:"5.3.4",value:"1"},{name:"5.3.5",value:"2"},{name:"5.4.3",value:"3"}]},{code:"tcl",version:[{name:"8.6",value:"0"},{name:"8.6.7",value:"1"},{name:"8.6.8",value:"2"},{name:"8.6.9",value:"3"},{name:"8.6.12",value:"4"}]},{code:"rust",version:[{name:"1.10.0",value:"0"},{name:"1.21.0",value:"1"},{name:"1.25.0",value:"2"},{name:"1.38.0",value:"3"},{name:"1.56.1",value:"4"}]},{code:"d",version:[{name:"DMD64 D Compiler v2.071.1",value:"0"},{name:"DMD64 D Compiler v2.088",value:"1"},{name:"DMD64 D Compiler v2.098",value:"2"}]},{code:"r",version:[{name:"3.3.1",value:"0"},{name:"3.4.2",value:"1"},{name:"3.5.0",value:"2"},{name:"3.6.1",value:"3"},{name:"4.1.2",value:"4"}]},{code:"verilog",version:[{name:"10.1",value:"0"},{name:"10.2",value:"1"},{name:"10.3",value:"2"},{name:"11",value:"3"}]},{code:"cobol",version:[{name:"GNU COBOL 2.0.0",value:"0"},{name:"GNU COBOL 2.2.0",value:"1"},{name:"GNU COBOL 3.0",value:"2"},{name:"GNU COBOL 3.1.2",value:"3"}]},{code:"dart",version:[{name:"1.18.0",value:"0"},{name:"1.24.2",value:"1"},{name:"1.24.3",value:"2"},{name:"2.5.1",value:"3"},{name:"2.14.4",value:"4"}]},{code:"clojure",version:[{name:"1.8.0",value:"0"},{name:"1.9.0",value:"1"},{name:"1.10.1",value:"2"},{name:"1.10.3",value:"3"}]},{code:"nodejs",version:[{name:"node 6.3.1",value:"0"},{name:"node 9.2.0",value:"1"},{name:"node 10.1.0",value:"2"},{name:"node 12.11.1",value:"3"},{name:"node 17.1.0",value:"4"}]},{code:"scheme",version:[{name:"Gauche 0.9.4",value:"0"},{name:"Gauche 0.9.5",value:"1"},{name:"Gauche 0.9.8",value:"2"},{name:"Gauche 0.9.10",value:"3"}]},{code:"forth",version:[{name:"gforth 0.7.3",value:"0"}]},{code:"octave",version:[{name:"GNU 4.0.0",value:"0"},{name:"GNU 4.2.1",value:"1"},{name:"GNU 4.4.0",value:"2"},{name:"GNU 5.1.0",value:"3"},{name:"GNU 6.4.0",value:"4"}]},{code:"coffeescript",version:[{name:"1.11.1",value:"0"},{name:"2.0.0",value:"1"},{name:"2.3.0",value:"2"},{name:"2.4.1",value:"3"},{name:"2.6.1",value:"4"}]},{code:"fsharp",version:[{name:"4.1",value:"0"},{name:"4.5.0",value:"1"}]},{code:"ocaml",version:[{name:"4.03.0",value:"0"},{name:"4.08.1",value:"1"},{name:"4.12.0",value:"2"}]},{code:"factor",version:[{name:"8.25",value:"0"},{name:"8.28",value:"1"},{name:"8.29",value:"2"},{name:"8.31",value:"3"}]},{code:"smalltalk",version:[{name:"GNU SmallTalk 3.2.92",value:"0"}]},{code:"kotlin",version:[{name:"1.1.51 (JRE 9.0.1+11)",value:"0"},{name:"1.2.40 (JRE 10.0.1)",value:"1"},{name:"1.3.50 (JRE 11.0.4)",value:"2"},{name:"1.6.0 (JRE 17.0.1+12)",value:"3"}]},{code:"erlang",version:[{name:"22.1",value:"0"},{name:"24",value:"1"}]},{code:"haxe",version:[{name:"4.2.4",value:"0"}]}],ne=v=>{for(let m of $)if(v===m.code)return m;throw new Error(`not found ${v} language`)},b=()=>{const v=M.get("code_run_config");return v!==null?v:{client_id:"",client_secret:""}},le=(v,m)=>{M.setNoVersion("code_run_config",{client_id:v,client_secret:m})},ue=()=>new Promise((v,m)=>{const i=b();if(i.client_secret===""||i.client_id==="")return m("not found config");O().post("https://api.jdoodle.com/v1/credit-spent",{clientId:i.client_id,clientSecret:i.client_secret}).then(e=>v(Number(`${e.data.used}`))).catch(function(e){m(e)})}),oe=async(v,m,i)=>new Promise((e,c)=>{const d=b();if(d.client_secret===""||d.client_id==="")return c("not found config");O().post("https://api.jdoodle.com/v1/execute",{clientId:d.client_id,clientSecret:d.client_secret,script:m,language:v,versionIndex:i}).then(n=>(n.data.error&&c(`[${n.data.statusCode}]${n.data.error}`),e({output:n.data.output,memory:n.data.memory,cpuTime:n.data.cpuTime,error:""}))).catch(n=>{var G,g,p,y;let h=n;return n instanceof Y.AxiosError&&(g=(G=n.response)==null?void 0:G.data)!=null&&g.error&&(h=`[${(p=n.response)==null?void 0:p.data.statusCode}]${(y=n.response)==null?void 0:y.data.error}
${n.message}`),c(h)})}),te=_("span",null,"|",-1),re=_("strong",null,"Client ID",-1),me=_("strong",null,"Client Secret",-1),ve=_("img",{src:ae,style:{width:"500px"}},null,-1),Ge=K({__name:"Run",async setup(v){let m,i;const e=I(([m,i]=P(()=>A({input:"",language:"php",version:(()=>{let a={};for(let l of $)a[l.code]=l.version[l.version.length-1].value;return a})(),result:{output:"",memory:0,cpuTime:0,error:""}})),m=await m,i(),m));let c=C(!1),d=C(0),n=C(b());const h=$.map(a=>a.code).sort(),G=Q(()=>ne(e.current.language).version.map(a=>({value:a.value,label:a.name})));let g=C(!1),p=C(!1);const y=()=>{try{p.value=!0,oe(e.current.language,e.current.input,e.current.version[e.current.language]).then(a=>{e.current.result=a,e.save()}).catch(a=>{e.current.result={output:"",memory:0,cpuTime:0,error:$error(a)},e.save()}).finally(()=>{p.value=!1,w()})}catch(a){e.current.result={output:"",memory:0,cpuTime:0,error:$error(a)},p.value=!1}};H(()=>({config:n.value}),({config:a})=>{le(a.client_id,a.client_secret),w()},{deep:!0});const w=()=>{n.value.client_id===""||n.value.client_secret===""||ue().then(a=>{d.value=a,g.value=!0}).catch(a=>{throw d.value=0,g.value=!1,a})};return q(()=>{w()}),(a,l)=>{const D=s("Editor"),R=s("HeightResize"),k=s("Select"),U=s("Button"),f=s("Align"),J=s("Card"),L=s("Input"),E=s("Link"),T=s("ExtendPage"),S=Z("row");return V(),x(F,null,[u(f,{direction:"vertical"},{default:r(()=>[u(R,{reduce:205},{default:r(({height:t})=>[u(D,{modelValue:o(e).current.input,"onUpdate:modelValue":l[0]||(l[0]=j=>o(e).current.input=j),lang:o(e).current.language,height:`${t}px`},null,8,["modelValue","lang","height"])]),_:1}),u(J,{title:a.$t("main_ui_output"),height:200,padding:"0"},{extra:r(()=>[u(f,null,{default:r(()=>[_("span",null,N(a.$t("code_run_used_times",[d.value])),1),u(k,{dialog:"",size:"small",modelValue:o(e).current.language,"onUpdate:modelValue":l[1]||(l[1]=t=>o(e).current.language=t),options:o(h).map(t=>({value:t,label:o(ee)(t)}))},null,8,["modelValue","options"]),u(k,{size:"small",modelValue:o(e).current.version[o(e).current.language],"onUpdate:modelValue":l[2]||(l[2]=t=>o(e).current.version[o(e).current.language]=t),options:G.value},null,8,["modelValue","options"]),u(U,{type:"primary",text:p.value?a.$t("code_running"):a.$t("code_run"),disabled:p.value||!g.value||o(e).current.input==="",size:"small",onClick:l[3]||(l[3]=t=>y())},null,8,["text","disabled"]),te,u(U,{type:"primary",size:"small",onClick:l[4]||(l[4]=t=>c.value=!c.value)},{default:r(()=>[z(N(a.$t("main_ui_setting")),1)]),_:1})]),_:1})]),default:r(()=>[u(D,{lang:"shell","model-value":o(e).current.result.error!==""?o(e).current.result.error:o(e).current.result.output},{default:r(()=>[o(e).current.result.output!==""&&o(e).current.result.error===""?(V(),W(U,{key:0,type:"dotted",size:"small",text:`Memory:${o(e).current.result.memory} Cpu Time:${o(e).current.result.cpuTime}`},null,8,["text"])):X("",!0)]),_:1},8,["model-value"])]),_:1},8,["title"])]),_:1}),u(T,{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=t=>c.value=t)},{default:r(()=>[u(J,{title:a.$t("main_ui_setting"),padding:"20px"},{default:r(()=>[u(f,{direction:"vertical",style:{"margin-bottom":"20px"}},{default:r(()=>[B((V(),x("div",null,[re,u(L,{modelValue:n.value.client_id,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.client_id=t)},null,8,["modelValue"])])),[[S,"130px-1"]]),B((V(),x("div",null,[me,u(L,{modelValue:n.value.client_secret,"onUpdate:modelValue":l[6]||(l[6]=t=>n.value.client_secret=t)},null,8,["modelValue"])])),[[S,"130px-1"]])]),_:1}),u(f,{direction:"vertical"},{default:r(()=>[u(f,{horizontal:"center",vertical:"center"},{default:r(()=>[u(E,{href:"https://www.jdoodle.com/compiler-api/",tooltip:a.$t("code_run_config_explain",["https://www.jdoodle.com/"])},{default:r(()=>[ve]),_:1},8,["tooltip"])]),_:1}),u(f,{horizontal:"center",vertical:"center"},{default:r(()=>[u(E,{href:"https://www.jdoodle.com/compiler-api/",type:"primary",style:{"font-size":"12px"}},{default:r(()=>[z(N(a.$t("code_run_config_explain",["https://www.jdoodle.com/"])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{Ge as default};
