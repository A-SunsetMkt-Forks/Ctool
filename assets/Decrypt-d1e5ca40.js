import{u as T,i as b}from"./action-398a71db.js";import{c as k,a as H,T as a}from"./index-c17867b9.js";import{s as A}from"./index-636623a5.js";import{a4 as I,b0 as S,Q as U,U as m,b1 as l,aG as r,aH as D,ay as d,a2 as u,x as o,b3 as E}from"./history-c0e2c0dd.js";import"./_commonjsHelpers-87174ba5.js";import"./index-cc134824.js";const K=I({__name:"Decrypt",async setup(z){let i,s;const e=T(([i,s]=S(()=>b({input:k("hex"),option:{private_key:"",cipher_mode:1},output:H("text")},!1)),i=await i,s(),i)),_=U(()=>{if(e.current.input.text.isEmpty()||e.current.option.private_key==="")return a.empty();try{if(e.current.input.text.isError())return e.current.input.text;let p=A.sm2.doDecrypt(e.current.input.text.toHexString(),e.current.option.private_key,e.current.option.cipher_mode);if(p==="")throw new Error("failure");return a.fromString(p)}catch(p){return a.fromError($error(p))}});return(p,t)=>{const x=r("TextInput"),f=r("Input"),v=r("Select"),h=r("HelpTip"),c=r("Align"),y=r("TextOutput"),g=r("HeightResize"),V=D("row");return d(),m(g,{ignore:"",append:[".ctool-page-option"],reduce:10},{default:l(({small:w,large:C})=>[u(c,{direction:"vertical"},{default:l(()=>[u(x,{modelValue:o(e).current.input,"onUpdate:modelValue":t[0]||(t[0]=n=>o(e).current.input=n),allow:["base64","hex"],height:w},null,8,["modelValue","height"]),E((d(),m(c,{class:"ctool-page-option"},{default:l(()=>[u(f,{modelValue:o(e).current.option.private_key,"onUpdate:modelValue":t[1]||(t[1]=n=>o(e).current.option.private_key=n),placeholder:"Private Key"},null,8,["modelValue"]),u(v,{options:[{value:1,label:"C1-C3-C2"},{value:0,label:"C1-C2-C3"}],modelValue:o(e).current.option.cipher_mode,"onUpdate:modelValue":t[2]||(t[2]=n=>o(e).current.option.cipher_mode=n)},null,8,["modelValue"]),u(h,{link:"https://github.com/JuneAndGreen/sm-crypto"})]),_:1})),[[V,"1-auto-auto"]]),u(y,{modelValue:o(e).current.output,"onUpdate:modelValue":t[3]||(t[3]=n=>o(e).current.output=n),allow:["text","hex","base64"],content:_.value,height:C,onSuccess:t[4]||(t[4]=n=>o(e).save())},null,8,["modelValue","content","height"])]),_:2},1024)]),_:1},8,["append"])}}});export{K as default};
