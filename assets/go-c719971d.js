import{J as G}from"./index-da14ef80.js";const J=(F,j,N,f=!0)=>{let h,A,S="",O=0;const k={},d=[];let I="",P=0,a="";try{h=G.parse(F.replace(/:(\s*\d*)\.0/g,":$1.1")),A=h}catch(e){throw new Error($error(e))}return j=p(j||"AutoGenerated"),c(`package ${N}

`),c(`type ${j} `),g(A),f?S+=I:S;function g(e,t=0){if(typeof e=="object"&&e!==null)if(Array.isArray(e)){let n;const r=e.length;for(let o=0;o<r;o++){const s=L(e[o]);if(!n)n=s;else if(n!==s&&(n=H(s,n),n==="interface{}"))break}const i=f&&["struct","slice"].includes(n)?`[]${a}`:"[]";if(f&&t>=2?u(i):c(i),n==="struct"){const o={};for(let l=0;l<r;l++){const m=Object.keys(e[l]);for(let T in m){let b=m[T];if(!(b in o))o[b]={value:e[l][b],count:0};else{const R=o[b].value,U=e[l][b];z(R,U)&&(M(Object.keys(U),Object.keys(R))||(b=`${b}_${v()}`,o[b]={value:U,count:0}))}o[b].count++}}const s=Object.keys(o),x={},y={};for(let l in s){const m=s[l],T=o[m];x[m]=T.value,y[m]=T.count!==r}C(t+1,P,x,y)}else n==="slice"?g(e[0],t):f&&t>=2?u(n||"interface{}"):c(n||"interface{}")}else f&&(t>=2?u(a):c(a)),C(t+1,P,e);else f&&t>=2?u(L(e)):c(L(e))}function C(e,t,n,r){if(f&&d.push(e>=2?`
`:""),f&&e>=2){const i=`type ${a}`,o=E(Object.keys(n));if(a in k&&M(o,k[a])){d.pop();return}k[a]=o,u(`${i} struct {
`),++t;const s=Object.keys(n);for(let x in s){const y=D(s[x]);$(t);const l=p(y);u(l+" "),a=l,g(n[s[x]],e),u(' `json:"'+y),r&&r[s[x]]===!0&&u(",omitempty"),u('"`\n')}$(--t),u("}")}else{c(`struct {
`),++O;const i=Object.keys(n);for(let o in i){const s=D(i[o]);_(O);const x=p(s);c(x+" "),a=x,g(n[i[o]],e),c(' `json:"'+s),r&&r[i[o]]===!0&&c(",omitempty"),c('"`\n')}_(--O),c("}")}f&&(I+=d.pop())}function _(e){for(let t=0;t<e;t++)S+="	"}function c(e){S+=e}function $(e){for(let t=0;t<e;t++)d[d.length-1]+="	"}function u(e){d[d.length-1]+=e}function p(e){if(e)e.match(/^\d+$/)?e="Num"+e:e.charAt(0).match(/\d/)&&(e={0:"Zero_",1:"One_",2:"Two_",3:"Three_",4:"Four_",5:"Five_",6:"Six_",7:"Seven_",8:"Eight_",9:"Nine_"}[e.charAt(0)]+e.substr(1));else return"";return w(e).replace(/[^a-z0-9]/ig,"")||"NAMING_FAILED"}function L(e){if(e===null)return"interface{}";switch(typeof e){case"string":return/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(\+\d\d:\d\d|Z)/.test(e)?"time.Time":"string";case"bigint":return"int64";case"number":return e%1===0?e>-2147483648&&e<2147483647?"int":"int64":"float64";case"boolean":return"bool";case"object":return Array.isArray(e)?"slice":"struct";default:return"interface{}"}}function H(e,t){return e.substr(0,5)==="float"&&t.substr(0,3)==="int"?e:e.substr(0,3)==="int"&&t.substr(0,5)==="float"?t:"interface{}"}function w(e){const t=["ACL","API","ASCII","CPU","CSS","DNS","EOF","GUID","HTML","HTTP","HTTPS","ID","IP","JSON","LHS","QPS","RAM","RHS","RPC","SLA","SMTP","SQL","SSH","TCP","TLS","TTL","UDP","UI","UID","UUID","URI","URL","UTF8","VM","XML","XMPP","XSRF","XSS"];return e.replace(/(^|[^a-zA-Z])([a-z]+)/g,function(n,r,i){return t.indexOf(i.toUpperCase())>=0?r+i.toUpperCase():r+i[0].toUpperCase()+i.substr(1).toLowerCase()}).replace(/([A-Z])([a-z]+)/g,function(n,r,i){return t.indexOf(r+i.toUpperCase())>=0?(r+i).toUpperCase():r+i})}function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function D(e){const t=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;if(e.length>=36){const r=e.substr(-36);if(t.test(r))return e.slice(0,-1*(36+1))}return e}function z(e,t){const n="[object Object]";return Object.prototype.toString.call(e)===n&&Object.prototype.toString.call(t)===n}function M(e,t){const n=e.length,r=t.length;if(n===0&&r===0)return!0;if(n!==r)return!1;for(let i of e)if(!t.includes(i))return!1;return!0}function E(e){for(let t in e)e[t]=p(e[t]);return e}};export{J as convert};
