import{u as O,i as P}from"./action-716087f2.js";import{D as R,bU as u,l as i,bj as G,aB as Z,bf as q,p as g,y as l,bk as p,F as h,aG as d,aH as J,at as a,aE as A,n as $,b0 as o,o as K,bv as Q,bm as W}from"./history-00b3515f.js";import{u as X,t as ee,z as te,e as ne}from"./en_US-e946fe52.js";import"./shim-03580cdb.js";import"./_commonjsHelpers-87174ba5.js";const re={key:1},ce=R({__name:"Timezone",async setup(oe){let _,b;u.extend(X),u.extend(ee);const z="large",H=["Asia/Shanghai","Europe/London","Asia/Tokyo","America/Chicago","Europe/Berlin","Africa/Cairo","Asia/Calcutta"],w=i(()=>{const t=Intl.supportedValuesOf("timeZone");return Object.entries($t("main_locale")==="zh_CN"?te:ne).filter(([n])=>t.includes(n)).map(([n,m])=>({value:n,label:`${m}`}))}),Y=t=>new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+$/).test(t.trim())||new RegExp(/^\d+-\d+-\d+ \d+:\d+:\d+\.\d+$/).test(t.trim()),e=O(([_,b]=G(()=>P({type:"",input:"",timezone:[...new Set([u.tz.guess(),...H])].slice(0,7)},{paste:!1})),_=await _,b(),_));let x=Z(!1);const s=t=>{if(!e.current.type||e.current.input.trim()==="")return"";if(e.current.type===t)return e.current.input;try{if(!v.value)throw new Error($t("time_error_format"));return C(e.current.input,e.current.type,t)}catch(n){return $error(n)}},c=(t,n)=>{e.current.input=n,e.current.type=t};q(()=>e.current,t=>{!Y(t.input)||t.type===""||e.save()},{immediate:!0,deep:!0});const v=i(()=>Y(e.current.input.trim())),C=(t,n,m)=>t.includes(".")?u.tz(u.tz(t,n),m).format("YYYY-MM-DD HH:mm:ss.SSS"):u.tz(u.tz(t,n),m).format("YYYY-MM-DD HH:mm:ss"),M=()=>{e.current.type=e.current.timezone[0],e.current.input=u.tz(u(),e.current.type).format("YYYY-MM-DD HH:mm:ss")},B=i({get:()=>s(e.current.timezone[0]),set:t=>c(e.current.timezone[0],t)}),S=i({get:()=>s(e.current.timezone[1]),set:t=>c(e.current.timezone[1],t)}),U=i({get:()=>s(e.current.timezone[2]),set:t=>c(e.current.timezone[2],t)}),T=i({get:()=>s(e.current.timezone[3]),set:t=>c(e.current.timezone[3],t)}),I=i({get:()=>s(e.current.timezone[4]),set:t=>c(e.current.timezone[4],t)}),L=i({get:()=>s(e.current.timezone[5]),set:t=>c(e.current.timezone[5],t)}),j=i({get:()=>s(e.current.timezone[6]),set:t=>c(e.current.timezone[6],t)}),k={output0:B,output1:S,output2:U,output3:T,output4:I,output5:L,output6:j};return(t,n)=>{const m=d("Input"),D=d("Select"),f=d("Button"),V=d("Align"),E=d("Display"),N=d("ExtendPage"),F=J("row");return a(),g(h,null,[l(V,{direction:"vertical"},{default:p(()=>[(a(!0),g(h,null,A(o(Q.range)(0,7),r=>(a(),$(E,{position:"right-center"},{extra:p(()=>[l(V,null,{default:p(()=>[l(D,{modelValue:o(e).current.timezone[r],"onUpdate:modelValue":y=>o(e).current.timezone[r]=y,options:w.value,size:"small",disabled:v.value&&o(e).current.timezone[r]===o(e).current.type},null,8,["modelValue","onUpdate:modelValue","options","disabled"]),v.value?(a(),$(f,{key:0,text:t.$t("main_ui_copy"),onClick:y=>t.$copy(k[`output${r}`].value),size:"small",type:"primary"},null,8,["text","onClick"])):K("",!0)]),_:2},1024)]),default:p(()=>[l(m,{modelValue:k[`output${r}`].value,"onUpdate:modelValue":y=>k[`output${r}`].value=y,placeholder:t.$t("time_timezone_input_placeholder"),size:z},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1024))),256)),v.value?W((a(),g("div",re,[l(f,{size:z,onClick:n[0]||(n[0]=r=>x.value=!0),text:t.$t("main_ui_more")},null,8,["text"]),l(f,{size:z,onClick:n[1]||(n[1]=r=>o(e).current.input=""),text:t.$t("main_ui_clear")},null,8,["text"])])),[[F,"1-100px"]]):(a(),$(f,{key:0,size:z,text:t.$t("time_current_time"),onClick:M},null,8,["text"]))]),_:1}),l(N,{modelValue:x.value,"onUpdate:modelValue":n[2]||(n[2]=r=>x.value=r)},{default:p(()=>[l(V,{direction:"vertical"},{default:p(()=>[(a(!0),g(h,null,A(w.value,r=>(a(),$(E,{position:"right-center",text:r.label,type:r.value===o(e).current.type?"danger":"general",onClick:()=>t.$copy(C(o(e).current.input,o(e).current.type,r.value))},{default:p(()=>[l(m,{"model-value":C(o(e).current.input,o(e).current.type,r.value),size:z},null,8,["model-value"])]),_:2},1032,["text","type","onClick"]))),256))]),_:1})]),_:1},8,["modelValue"])],64)}}});export{ce as default};
