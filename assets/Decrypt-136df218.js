import{u as k,i as C}from"./action-cc5da9d8.js";import{c as T,a as A,T as a}from"./index-c15df6a3.js";import{s as H}from"./index-636623a5.js";import{A as I,bi as D,k as E,m,bj as l,aF as r,aG as S,as as d,x as p,a$ as o,bl as U}from"./history-4c0a99f7.js";import"./_commonjsHelpers-87174ba5.js";import"./index-b1ff2442.js";import"./shim-03580cdb.js";const J=I({__name:"Decrypt",async setup($){let i,s;const t=k(([i,s]=D(()=>C({input:T("hex"),option:{private_key:"",cipher_mode:1},output:A("text")})),i=await i,s(),i)),_=E(()=>{if(t.current.input.text.isEmpty()||t.current.option.private_key==="")return a.empty();try{if(t.current.input.text.isError())return t.current.input.text;let u=H.sm2.doDecrypt(t.current.input.text.toHexString(),t.current.option.private_key,t.current.option.cipher_mode,{output:"array"});if(u==="")throw new Error("failure");return a.fromArray(u)}catch(u){return a.fromError($error(u))}});return(u,e)=>{const x=r("TextInput"),f=r("Input"),v=r("Select"),y=r("HelpTip"),c=r("Align"),h=r("TextOutput"),g=r("HeightResize"),V=S("row");return d(),m(g,{ignore:"",append:[".ctool-page-option"],reduce:10},{default:l(({small:w,large:b})=>[p(c,{direction:"vertical"},{default:l(()=>[p(x,{modelValue:o(t).current.input,"onUpdate:modelValue":e[0]||(e[0]=n=>o(t).current.input=n),allow:["base64","hex"],height:w},null,8,["modelValue","height"]),U((d(),m(c,{class:"ctool-page-option"},{default:l(()=>[p(f,{modelValue:o(t).current.option.private_key,"onUpdate:modelValue":e[1]||(e[1]=n=>o(t).current.option.private_key=n),label:u.$t("sm2_private_key")},null,8,["modelValue","label"]),p(v,{options:[{value:1,label:"C1-C3-C2"},{value:0,label:"C1-C2-C3"}],modelValue:o(t).current.option.cipher_mode,"onUpdate:modelValue":e[2]||(e[2]=n=>o(t).current.option.cipher_mode=n)},null,8,["modelValue"]),p(y,{link:"https://github.com/JuneAndGreen/sm-crypto"})]),_:1})),[[V,"1-auto-auto"]]),p(h,{modelValue:o(t).current.output,"onUpdate:modelValue":e[3]||(e[3]=n=>o(t).current.output=n),allow:["text","hex","base64","image","down"],content:_.value,height:b,onSuccess:e[4]||(e[4]=n=>o(t).save())},null,8,["modelValue","content","height"])]),_:2},1024)]),_:1},8,["append"])}}});export{J as default};
