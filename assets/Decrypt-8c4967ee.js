import{u as T,i as k}from"./action-b0774d39.js";import{d as b,y as A,z as E,D,c as d,w as a,r as u,B as H,f as _,v as p,j as t,A as I,C as z,E as U,T as l}from"./tool-86fca7a1.js";import{a as B}from"./index-6f0f6895.js";import"./modulepreload-polyfill-3cfb730f.js";const G=b({__name:"Decrypt",async setup(O){let i,c;const e=T(([i,c]=A(()=>k({input:z("hex"),option:{private_key:"",cipher_mode:1},output:U("text")})),i=await i,c(),i)),s=E(()=>{if(e.current.input.text.isEmpty()||e.current.option.private_key==="")return l.empty();try{if(e.current.input.text.isError())return e.current.input.text;let o=B.sm2.doDecrypt(e.current.input.text.toHexString(),e.current.option.private_key,e.current.option.cipher_mode,{output:"array"});if(o==="")throw new Error("failure");return l.fromArray(o)}catch(o){return l.fromError($error(o))}});return D(()=>s.value,o=>{o.isEmpty()||e.save()},{immediate:!0,deep:!0}),(o,r)=>{const x=u("TextInput"),f=u("Input"),h=u("Select"),y=u("HelpTip"),m=u("Align"),v=u("TextOutput"),g=u("HeightResize"),w=H("row");return _(),d(g,{ignore:"",append:[".ctool-page-option"],reduce:10},{default:a(({small:V,large:C})=>[p(m,{direction:"vertical"},{default:a(()=>[p(x,{modelValue:t(e).current.input,"onUpdate:modelValue":r[0]||(r[0]=n=>t(e).current.input=n),allow:["base64","hex"],height:V},null,8,["modelValue","height"]),I((_(),d(m,{class:"ctool-page-option"},{default:a(()=>[p(f,{modelValue:t(e).current.option.private_key,"onUpdate:modelValue":r[1]||(r[1]=n=>t(e).current.option.private_key=n),label:o.$t("sm2_private_key")},null,8,["modelValue","label"]),p(h,{options:[{value:1,label:"C1-C3-C2"},{value:0,label:"C1-C2-C3"}],modelValue:t(e).current.option.cipher_mode,"onUpdate:modelValue":r[2]||(r[2]=n=>t(e).current.option.cipher_mode=n)},null,8,["modelValue"]),p(y,{link:"https://github.com/JuneAndGreen/sm-crypto"})]),_:1})),[[w,"1-auto-auto"]]),p(v,{modelValue:t(e).current.output,"onUpdate:modelValue":r[3]||(r[3]=n=>t(e).current.output=n),allow:["text","hex","base64","image","down"],content:t(s),height:C},null,8,["modelValue","content","height"])]),_:2},1024)]),_:1},8,["append"])}}});export{G as default};
