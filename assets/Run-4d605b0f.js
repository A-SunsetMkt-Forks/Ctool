import{u as Q,i as F}from"./action-079863db.js";import{bN as j,cd as O,A as H,bi as Z,bP as q,aA as y,k as W,be as X,al as Y,o as V,x as o,bj as t,F as ee,aF as c,aG as ae,as as C,a$ as n,aT as $,bu as M,n as T,w,m as D,bl as R,p as b}from"./history-bfc066a1.js";import{a as A,b as ne}from"./index-6faa9b38.js";import{g as le}from"./code-e692d8f4.js";import"./shim-03580cdb.js";import"./_commonjsHelpers-87174ba5.js";import"./index-1a29e17b.js";const ue=""+new URL("run_api_config-96d4f360.png",import.meta.url).href,k=[{code:"java",version:[{name:"JDK 1.8.0_66",value:"0"},{name:"JDK 9.0.1",value:"1"},{name:"JDK 10.0.1",value:"2"},{name:"JDK 11.0.4",value:"3"},{name:"JDK 17.0.1",value:"4"}]},{code:"c",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"c99",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp",version:[{name:"GCC 5.3.0",value:"0"},{name:"Zapcc 5.0.0",value:"1"},{name:"GCC 7.2.0",value:"2"},{name:"GCC 8.1.0",value:"3"},{name:"GCC 9.1.0",value:"4"},{name:"GCC 11.1.0",value:"5"}]},{code:"cpp14",version:[{name:"g++ 14 GCC 5.3.0",value:"0"},{name:"g++ 14 GCC 7.2.0",value:"1"},{name:"g++ 14 GCC 8.1.0",value:"2"},{name:"g++ 14 GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"cpp17",version:[{name:"g++ 17 GCC 9.1.0",value:"0"},{name:"GCC 11.1.0",value:"1"}]},{code:"php",version:[{name:"5.6.16",value:"0"},{name:"7.1.11",value:"1"},{name:"7.2.5",value:"2"},{name:"7.3.10",value:"3"},{name:"8.0.13",value:"4"}]},{code:"perl",version:[{name:"5.22.0",value:"0"},{name:"5.26.1",value:"1"},{name:"5.26.2",value:"2"},{name:"5.30.0",value:"3"},{name:"5.34.0",value:"4"}]},{code:"python2",version:[{name:"2.7.11",value:"0"},{name:"2.7.15",value:"1"},{name:"2.7.16",value:"2"},{name:"2.7.18",value:"3"}]},{code:"python3",version:[{name:"3.5.1",value:"0"},{name:"3.6.3",value:"1"},{name:"3.6.5",value:"2"},{name:"3.7.4",value:"3"},{name:"3.9.9",value:"4"}]},{code:"ruby",version:[{name:"2.2.4",value:"0"},{name:"2.4.2p198",value:"1"},{name:"2.5.1p57",value:"2"},{name:"2.6.5",value:"3"},{name:"3.0.2",value:"4"}]},{code:"go",version:[{name:"1.5.2",value:"0"},{name:"1.9.2",value:"1"},{name:"1.10.2",value:"2"},{name:"1.13.1",value:"3"},{name:"1.17.3",value:"4"}]},{code:"scala",version:[{name:"2.12.0",value:"0"},{name:"2.12.4",value:"1"},{name:"2.12.5",value:"2"},{name:"2.13.0",value:"3"},{name:"2.13.6",value:"4"}]},{code:"bash",version:[{name:"4.3.42",value:"0"},{name:"4.4.12",value:"1"},{name:"4.4.19",value:"2"},{name:"5.0.011",value:"3"},{name:"5.1.12",value:"4"}]},{code:"sql",version:[{name:"SQLite 3.9.2",value:"0"},{name:"SQLite 3.21.0",value:"1"},{name:"SQLite 3.23.1",value:"2"},{name:"SQLite 3.29.0",value:"3"},{name:"3.37.0",value:"4"}]},{code:"pascal",version:[{name:"fpc 3.0.0",value:"0"},{name:"fpc-3.0.2",value:"1"},{name:"fpc-3.0.4",value:"2"},{name:"fpc-3.2.2",value:"3"}]},{code:"csharp",version:[{name:"mono 4.2.2",value:"0"},{name:"mono 5.0.0",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono-6.12.0",value:"4"}]},{code:"vbn",version:[{name:"mono 4.0.1",value:"0"},{name:"mono 4.6",value:"1"},{name:"mono 5.10.1",value:"2"},{name:"mono 6.0.0",value:"3"},{name:"mono 6.12.0",value:"4"}]},{code:"haskell",version:[{name:"ghc 7.10.3",value:"0"},{name:"ghc 8.2.1",value:"1"},{name:"ghc 8.2.2",value:"2"},{name:"ghc 8.6.5",value:"3"},{name:"9.0.1",value:"4"}]},{code:"objc",version:[{name:"GCC 5.3.0",value:"0"},{name:"GCC 7.2.0",value:"1"},{name:"GCC 8.1.0",value:"2"},{name:"GCC 9.1.0",value:"3"},{name:"GCC 11.1.0",value:"4"}]},{code:"swift",version:[{name:"2.2",value:"0"},{name:"3.1.1",value:"1"},{name:"4.1",value:"2"},{name:"5.1",value:"3"},{name:"5.5",value:"4"}]},{code:"groovy",version:[{name:"2.4.6 JVM: 1.7.0_99",value:"0"},{name:"2.4.12 JVM: 9.0.1",value:"1"},{name:"2.4.15 JVM: 10.0.1",value:"2"},{name:"2.5.8 JVM: 11.0.4",value:"3"},{name:"3.0.9 JVM: 17.0.1",value:"4"}]},{code:"fortran",version:[{name:"GNU 5.3.0",value:"0"},{name:"GNU 7.2.0",value:"1"},{name:"GNU 8.1.0",value:"2"},{name:"GNU 9.1.0",value:"3"},{name:"GNU 11.1.0",value:"4"}]},{code:"brainfuck",version:[{name:"bfc-0.1",value:"0"}]},{code:"lua",version:[{name:"5.3.2",value:"0"},{name:"5.3.4",value:"1"},{name:"5.3.5",value:"2"},{name:"5.4.3",value:"3"}]},{code:"tcl",version:[{name:"8.6",value:"0"},{name:"8.6.7",value:"1"},{name:"8.6.8",value:"2"},{name:"8.6.9",value:"3"},{name:"8.6.12",value:"4"}]},{code:"rust",version:[{name:"1.10.0",value:"0"},{name:"1.21.0",value:"1"},{name:"1.25.0",value:"2"},{name:"1.38.0",value:"3"},{name:"1.56.1",value:"4"}]},{code:"d",version:[{name:"DMD64 D Compiler v2.071.1",value:"0"},{name:"DMD64 D Compiler v2.088",value:"1"},{name:"DMD64 D Compiler v2.098",value:"2"}]},{code:"r",version:[{name:"3.3.1",value:"0"},{name:"3.4.2",value:"1"},{name:"3.5.0",value:"2"},{name:"3.6.1",value:"3"},{name:"4.1.2",value:"4"}]},{code:"verilog",version:[{name:"10.1",value:"0"},{name:"10.2",value:"1"},{name:"10.3",value:"2"},{name:"11",value:"3"}]},{code:"cobol",version:[{name:"GNU COBOL 2.0.0",value:"0"},{name:"GNU COBOL 2.2.0",value:"1"},{name:"GNU COBOL 3.0",value:"2"},{name:"GNU COBOL 3.1.2",value:"3"}]},{code:"dart",version:[{name:"1.18.0",value:"0"},{name:"1.24.2",value:"1"},{name:"1.24.3",value:"2"},{name:"2.5.1",value:"3"},{name:"2.14.4",value:"4"}]},{code:"clojure",version:[{name:"1.8.0",value:"0"},{name:"1.9.0",value:"1"},{name:"1.10.1",value:"2"},{name:"1.10.3",value:"3"}]},{code:"nodejs",version:[{name:"node 6.3.1",value:"0"},{name:"node 9.2.0",value:"1"},{name:"node 10.1.0",value:"2"},{name:"node 12.11.1",value:"3"},{name:"node 17.1.0",value:"4"}]},{code:"scheme",version:[{name:"Gauche 0.9.4",value:"0"},{name:"Gauche 0.9.5",value:"1"},{name:"Gauche 0.9.8",value:"2"},{name:"Gauche 0.9.10",value:"3"}]},{code:"forth",version:[{name:"gforth 0.7.3",value:"0"}]},{code:"octave",version:[{name:"GNU 4.0.0",value:"0"},{name:"GNU 4.2.1",value:"1"},{name:"GNU 4.4.0",value:"2"},{name:"GNU 5.1.0",value:"3"},{name:"GNU 6.4.0",value:"4"}]},{code:"coffeescript",version:[{name:"1.11.1",value:"0"},{name:"2.0.0",value:"1"},{name:"2.3.0",value:"2"},{name:"2.4.1",value:"3"},{name:"2.6.1",value:"4"}]},{code:"fsharp",version:[{name:"4.1",value:"0"},{name:"4.5.0",value:"1"}]},{code:"ocaml",version:[{name:"4.03.0",value:"0"},{name:"4.08.1",value:"1"},{name:"4.12.0",value:"2"}]},{code:"factor",version:[{name:"8.25",value:"0"},{name:"8.28",value:"1"},{name:"8.29",value:"2"},{name:"8.31",value:"3"}]},{code:"smalltalk",version:[{name:"GNU SmallTalk 3.2.92",value:"0"}]},{code:"kotlin",version:[{name:"1.1.51 (JRE 9.0.1+11)",value:"0"},{name:"1.2.40 (JRE 10.0.1)",value:"1"},{name:"1.3.50 (JRE 11.0.4)",value:"2"},{name:"1.6.0 (JRE 17.0.1+12)",value:"3"}]},{code:"erlang",version:[{name:"22.1",value:"0"},{name:"24",value:"1"}]},{code:"haxe",version:[{name:"4.2.4",value:"0"}]}],oe=v=>{for(let m of k)if(v===m.code)return m;throw new Error(`not found ${v} language`)},J=()=>{const v=j.get("code_run_config");return v!==null?v:{client_id:"",client_secret:""}},te=(v,m)=>{j.setNoVersion("code_run_config",{client_id:v,client_secret:m})},re=()=>new Promise((v,m)=>{const i=J();if(i.client_secret===""||i.client_id==="")return m("not found config");A.post(O("https://api.jdoodle.com/v1/credit-spent"),{clientId:i.client_id,clientSecret:i.client_secret}).then(e=>v(Number(`${e.data.used}`))).catch(function(e){m(e)})}),me=async(v,m,i)=>new Promise((e,d)=>{const s=J();if(s.client_secret===""||s.client_id==="")return d("not found config");A.post(O("https://api.jdoodle.com/v1/execute"),{clientId:s.client_id,clientSecret:s.client_secret,script:m,language:v,versionIndex:i}).then(l=>(l.data.error&&d(`[${l.data.statusCode}]${l.data.error}`),e({output:l.data.output,memory:l.data.memory,cpuTime:l.data.cpuTime,error:""}))).catch(l=>{var _,h,g,G;let p=l;return l instanceof ne.AxiosError&&(h=(_=l.response)==null?void 0:_.data)!=null&&h.error&&(p=`[${(g=l.response)==null?void 0:g.data.statusCode}]${(G=l.response)==null?void 0:G.data.error}
${l.message}`),d(p)})}),ve={key:0},ie=b("span",null,"|",-1),se=b("strong",null,"Client ID",-1),ce=b("strong",null,"Client Secret",-1),de=b("img",{src:ue,style:{width:"500px"}},null,-1),ye=H({__name:"Run",async setup(v){let m,i;const e=Q(([m,i]=Z(()=>F({input:"",language:"php",version:(()=>{let a={};for(let u of k)a[u.code]=u.version[u.version.length-1].value;return a})(),result:{output:"",memory:0,cpuTime:0,error:""}})),m=await m,i(),m)),d=!q.isWeb()||!1;let s=y(!1),l=y(0),p=y(J());const _=k.map(a=>a.code).sort(),h=W(()=>oe(e.current.language).version.map(a=>({value:a.value,label:a.name})));let g=y(!1);const G=()=>{try{g.value=!0,me(e.current.language,e.current.input,e.current.version[e.current.language]).then(a=>{e.current.result=a,e.save()}).catch(a=>{e.current.result={output:"",memory:0,cpuTime:0,error:$error(a)},e.save()}).finally(()=>{g.value=!1,N()})}catch(a){e.current.result={output:"",memory:0,cpuTime:0,error:$error(a)},g.value=!1}};X(()=>({config:p.value}),({config:a})=>{te(a.client_id,a.client_secret),N()},{deep:!0});const N=()=>{d&&re().then(a=>{l.value=a}).catch(a=>{l.value=$error(a)})};return Y(()=>{N()}),(a,u)=>{const L=c("Editor"),I=c("HeightResize"),E=c("Select"),U=c("Button"),f=c("Align"),x=c("Link"),z=c("Card"),S=c("Input"),K=c("ExtendPage"),B=ae("row");return C(),V(ee,null,[o(f,{direction:"vertical"},{default:t(()=>[o(I,{reduce:205},{default:t(({height:r})=>[o(L,{modelValue:n(e).current.input,"onUpdate:modelValue":u[0]||(u[0]=P=>n(e).current.input=P),lang:n(e).current.language,height:`${r}px`},null,8,["modelValue","lang","height"])]),_:1}),o(z,{title:a.$t("main_ui_output"),height:200,padding:"0"},{extra:t(()=>[o(f,null,{default:t(()=>[n(d)?(C(),V("span",ve,$(n(M.isNumber)(l.value)?a.$t("code_run_used_times",[l.value]):l.value),1)):T("",!0),o(E,{dialog:"",size:"small",modelValue:n(e).current.language,"onUpdate:modelValue":u[1]||(u[1]=r=>n(e).current.language=r),options:n(_).map(r=>({value:r,label:n(le)(r)}))},null,8,["modelValue","options"]),o(E,{size:"small",modelValue:n(e).current.version[n(e).current.language],"onUpdate:modelValue":u[2]||(u[2]=r=>n(e).current.version[n(e).current.language]=r),options:h.value},null,8,["modelValue","options"]),o(U,{type:"primary",text:g.value?a.$t("code_running"):a.$t("code_run"),disabled:g.value||!n(M.isNumber)(l.value)||!n(d)||n(e).current.input==="",size:"small",onClick:u[3]||(u[3]=r=>G())},null,8,["text","disabled"]),ie,o(U,{type:"primary",size:"small",onClick:u[4]||(u[4]=r=>s.value=!s.value)},{default:t(()=>[w($(a.$t("main_ui_setting")),1)]),_:1})]),_:1})]),default:t(()=>[n(d)?(C(),D(L,{key:1,lang:"shell","model-value":n(e).current.result.error!==""?n(e).current.result.error:n(e).current.result.output},{default:t(()=>[n(e).current.result.output!==""&&n(e).current.result.error===""?(C(),D(U,{key:0,type:"dotted",size:"small",text:`Memory:${n(e).current.result.memory} Cpu Time:${n(e).current.result.cpuTime}`},null,8,["text"])):T("",!0)]),_:1},8,["model-value"])):(C(),D(f,{key:0,height:"100%",horizontal:"center"},{default:t(()=>[w(" 由于跨域问题, 当前版本无法使用 "),o(x,{href:"https://github.com/baiy/Ctool/releases/latest",type:"primary"},{default:t(()=>[w("下载其他平台适配版本")]),_:1})]),_:1}))]),_:1},8,["title"])]),_:1}),o(K,{modelValue:s.value,"onUpdate:modelValue":u[7]||(u[7]=r=>s.value=r)},{default:t(()=>[o(z,{title:a.$t("main_ui_setting"),padding:"20px"},{default:t(()=>[o(f,{direction:"vertical",style:{"margin-bottom":"20px"}},{default:t(()=>[R((C(),V("div",null,[se,o(S,{modelValue:p.value.client_id,"onUpdate:modelValue":u[5]||(u[5]=r=>p.value.client_id=r)},null,8,["modelValue"])])),[[B,"130px-1"]]),R((C(),V("div",null,[ce,o(S,{modelValue:p.value.client_secret,"onUpdate:modelValue":u[6]||(u[6]=r=>p.value.client_secret=r)},null,8,["modelValue"])])),[[B,"130px-1"]])]),_:1}),o(f,{direction:"vertical"},{default:t(()=>[o(f,{horizontal:"center",vertical:"center"},{default:t(()=>[o(x,{href:"https://www.jdoodle.com/compiler-api/",tooltip:a.$t("code_run_config_explain",["https://www.jdoodle.com/"])},{default:t(()=>[de]),_:1},8,["tooltip"])]),_:1}),o(f,{horizontal:"center",vertical:"center"},{default:t(()=>[o(x,{href:"https://www.jdoodle.com/compiler-api/",type:"primary",style:{"font-size":"12px"}},{default:t(()=>[w($(a.$t("code_run_config_explain",["https://www.jdoodle.com/"])),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])],64)}}});export{ye as default};
